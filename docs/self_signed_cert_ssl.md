# How to set up SSL with a self-signed certificate

## Creating a self-signed certificate

Create a certificate by following the procedure for [creating a self-signed certificate](./create_self_signed_cert_ssl.md).

## Install nginx and set up SSL

1. Install nginx
   - Windows
     - Download nginx/Windows from [here](https://nginx.org/en/download.html)
     - Unzip and place directly under the drive (e.g. C:\nginx-1.26.2\)
   - macOS
     - Run the following in a terminal
     ```
     brew install nginx
     ```
1. Test launch of nginx
   - Windows, Make the nginx folder you placed in the terminal the current folder and execute the following
   ```
   start nginx
   ```
   - macOS, Run the following in a terminal
   ```
   nginx
   ```
1. Go to http://localhost and make sure nginx is running
1. Stop nginx that has been test-launched
   - Windows
   ```
   taskkill /f /im nginx.exe
   ```
   - macOS
   ```
   nginx -s stop
   ```
1. Open nginx configuration in an editor
   - Windows ※ Relative path from the nginx folder above.
   ```
   code .\conf\nginx.conf
   ```
   - macOS * This is an example for an Apple silicon Mac; the path would be different for an Intel silicon Mac.
   ```
   code /opt/homebrew/etc/nginx/nginx.conf
   ```
1. 以下のような編集し保存します。

   ```
   events {}
   http {
       # HTTP to HTTPS redirect
       server {
           listen 80;
           return 301 https://$host$request_uri;
       }
       server {
           listen 443 ssl; # Standard port settings allow connections from outside

           # Specify the server certificate generated by specifying the IP address earlier.
           ssl_certificate '/path/to/localhost+2.pem';
           ssl_certificate_key '/path/to/localhost+2-key.pem';;

           location / {
               proxy_pass http://localhost:XXXXX(URL to reverse proxy);
           }
       }
   }
   ```

1. Start nginx. You will see a confirmation popup to allow access as a server, please allow it.
   - Windows ※ The current folder must be the nginx folder.
   ```
   start nginx
   ```
   - macOS
   ```
   nginx -t # You can verify the configuration file with this command. If all is well, execute the following
   nginx
   ```
1. Access https://192.168.X.X (the IP address of the server you want to connect to via SSL) on your mobile device and verify that it indicates that your privacy is not protected (since you have not yet put your self-signed certificate in a trusted state).

## Install a self-signed certificate on your smartphone.

See [how to install a self-signed certificate on your phone](./install_signed_cert_ssl_to_smartphone.md).
